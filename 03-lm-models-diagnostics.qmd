# Linear regression models: Diagnostics and model-building

```{r}
pacman::p_load(tidyverse, GLMsData, janitor, patchwork)
```

```{r}
data("lungcap")
lung <- lungcap |>
  as_tibble() |>
  clean_names() |>
  mutate(smoke = factor(
    smoke,
    levels = c(0, 1),
    labels = c('Non-smoker',
               'Smoker')))
```

## Residuals for non-normal linear models

```{r}
model <- lung |> lm(fev ~ ht + gender + smoke, data = _)

c('Residuals' = var(resid(model)), 
  'Stadarized residuals' = var(rstandard(model)))
```

```{r}
p1 <- 
  resid(model) |> 
  as_tibble() |> 
  ggplot(aes(value)) +
  geom_histogram(bins = 50)

p2 <- 
  rstandard(model) |> 
  as_tibble() |> 
  ggplot(aes(value)) +
  geom_histogram(bins = 50)

p1 + p2
```

## Leverages for linear regression models

```{r}

```
